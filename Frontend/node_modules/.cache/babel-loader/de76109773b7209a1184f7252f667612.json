{"ast":null,"code":"var _jsxFileName = \"/Users/jonathantaylor/Google Drive/Interview2/Frontend/src/containers/LoansAndData.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { loanTypeContext, companyLoanContext } from '../context';\nimport Company from '../components/company';\nimport InputAndError from '../components/inputAndError';\nimport SelectAndError from '../components/selectAndError';\nimport LoanRequest from '../components/loanInfo';\nimport styled from 'styled-components';\nimport { frequencyAndTotal, loanBandCounter } from '../calculationFunctions';\nimport Chart from \"react-apexcharts\";\nimport { loanTypes, initialChartConfig, bandCounter, bandGroups } from '../config';\nimport { isFormValid, isFieldValid } from '../formValidation';\nconst StyledUl = styled.ul`\ndisplay: flex;\nwidth: 100%;\nflex-direction: column;\noverflow-y: scroll;\n`;\nconst StyledChart = styled(Chart)`\nborder: black solid 1px;\nmargin: 4rem;\nwidth: 700px;\n`;\nconst StyledButton = styled.button`\nwidth: 33%;\nbackground: ${props => {\n  if (props.active === \"isactive\") {\n    return \"blue\";\n  }\n}};\n`;\nconst StyledForm = styled.form`\ndisplay: flex;\nflex-direction: column;\nposition: absolute;\nright: 3rem;\nborder: 1px solid black;\npadding: 1rem;\n`;\nconst StyledInnerDiv = styled.div`\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\nwidth: 600px;\n`;\nconst StyledOuterDiv = styled.div`\ndisplay: flex;\nmargin: 5rem 5rem 0 5rem;\ngap: 5rem;\nmax-height: calc(100vh - 7rem);\n`;\nconst StyledChartDiv = styled.div`\nalign-self: flex-end;\nborder-bottom: solid black 1px;\n`;\n\nclass LoansAndData extends Component {\n  componentDidMount() {\n    this.getCompanies();\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.getCompanies = () => {\n      axios.get('http://localhost:5000/loans').then(response => {\n        //Creates the averages and total of each loan type data\n        let frequencyAndTotalData = frequencyAndTotal(loanTypes, response.data.companies);\n        let dataTypes = Object.keys(frequencyAndTotalData);\n        let frequencyAndTotals = Object.values(frequencyAndTotalData);\n        let averages = frequencyAndTotals.map(data => data.frequency !== 0 ? Math.round(data.totalAmount / data.frequency).toString() : 0);\n        let typeFrequencies = frequencyAndTotals.map(data => data.frequency); //Creates the loan band data\n\n        let bandCounterObject = loanBandCounter(response.data.companies, bandCounter);\n        let bandFrequencies = Object.values(bandCounterObject); //Updates the company state\n\n        this.setState({ ...this.state,\n          companies: response.data.companies.reverse(),\n          calculationsData: {\n            averages: averages,\n            frequencies: typeFrequencies,\n            bandFrequencies: bandFrequencies\n          }\n        }); //Updates the graph data\n\n        let graphName = this.state.chartConfig.series[0].name;\n        if (graphName === \"Averages\" || graphName === \"\") this.setState({ ...this.state,\n          chartConfig: { ...this.state.chartConfig,\n            options: { ...this.state.chartConfig.options,\n              xaxis: { ...this.state.chartConfig.options.xaxis,\n                categories: dataTypes\n              }\n            },\n            series: [{\n              name: \"Averages\",\n              data: averages\n            }]\n          }\n        });else if (graphName === \"Frequency (Type)\") this.setState({ ...this.state,\n          chartConfig: { ...this.state.chartConfig,\n            options: { ...this.state.chartConfig.options,\n              xaxis: { ...this.state.chartConfig.options.xaxis,\n                categories: dataTypes\n              }\n            },\n            series: [{\n              name: \"Frequency (Type)\",\n              data: typeFrequencies\n            }]\n          }\n        });else if (graphName === \"Frequency (Band)\") this.setState({ ...this.state,\n          chartConfig: { ...this.state.chartConfig,\n            options: { ...this.state.chartConfig.options,\n              xaxis: { ...this.state.chartConfig.options.xaxis,\n                categories: bandGroups\n              }\n            },\n            series: [{\n              name: \"Frequency (Band)\",\n              data: bandFrequencies\n            }]\n          }\n        });\n      });\n    };\n\n    this.formData = response => {};\n\n    this.addLoan = async e => {\n      e.preventDefault();\n      let data = {\n        name: this.state.loanData.name,\n        amount: this.state.loanData.amount,\n        type: this.state.loanData.type,\n        otherType: this.state.loanData.otherType\n      };\n      await axios.post('http://localhost:5000/loans', data);\n      this.setState({ ...this.state,\n        loanData: this.initialFormData\n      });\n      this.getCompanies();\n    };\n\n    this.dropDownChangeHandler = e => {\n      let {\n        value\n      } = e.target;\n\n      if (value === \"Other\") {\n        this.setState({ ...this.state,\n          loanData: { ...this.state.loanData,\n            type: value\n          },\n          inputValidated: { ...this.state.inputValidated,\n            otherType: false\n          }\n        });\n      } else {\n        this.setState({ ...this.state,\n          loanData: { ...this.state.loanData,\n            type: value,\n            otherType: \"\"\n          },\n          inputValidated: { ...this.state.inputValidated,\n            otherType: true\n          }\n        });\n      }\n    };\n\n    this.onChangeHandler = e => {\n      let {\n        name,\n        value\n      } = e.target;\n      this.setState({ ...this.state,\n        loanData: { ...this.state.loanData,\n          [name]: value\n        }\n      });\n    };\n\n    this.deleteCompany = async (e, companyId) => {\n      e.stopPropagation();\n      await axios.delete('http://localhost:5000/loans/' + companyId); // let updatedCompanies = [...this.state.companies].filter(company=>company._id!==companyId);\n      // this.setState({...this.state, companies: updatedCompanies});\n\n      this.getCompanies();\n    };\n\n    this.onBlurHandler = e => {\n      let {\n        name,\n        value\n      } = e.target;\n      let validator = isFieldValid(name, value);\n      this.setState({ ...this.state,\n        inputClicked: { ...this.state.inputClicked,\n          [name]: true\n        },\n        inputValidated: { ...this.state.inputValidated,\n          [name]: validator\n        }\n      });\n    };\n\n    this.changeGraph = e => {\n      let name;\n      let data;\n      let categories;\n      let activeGraph;\n\n      switch (e.target.name) {\n        case \"average\":\n          name = \"Averages\";\n          data = this.state.calculationsData.averages;\n          categories = loanTypes;\n          activeGraph = \"Average\";\n          break;\n\n        case \"frequencyType\":\n          name = \"Frequency (Type)\";\n          data = this.state.calculationsData.frequencies;\n          categories = loanTypes;\n          activeGraph = \"Frequency (Type)\";\n          break;\n\n        case \"frequencyBands\":\n          name = \"Frequency (Band)\";\n          data = this.state.calculationsData.bandFrequencies;\n          categories = bandGroups;\n          activeGraph = \"Frequency (Band)\";\n          break;\n\n        default:\n          console.log(\"error\");\n      }\n\n      this.setState({ ...this.state,\n        chartConfig: { ...this.state.chartConfig,\n          options: { ...this.state.chartConfig.options,\n            xaxis: { ...this.state.chartConfig.options.xaxis,\n              categories: categories\n            }\n          },\n          series: [{\n            name: name,\n            data: data\n          }]\n        },\n        activeGraph: activeGraph\n      });\n    };\n\n    this.initialFormData = {\n      name: \"\",\n      amount: \"\",\n      type: \"DEFAULT\",\n      otherType: \"\"\n    };\n    this.state = {\n      chartConfig: initialChartConfig,\n      companies: [],\n      loanTypes: loanTypes,\n      loanData: this.initialFormData,\n      inputValidated: {\n        name: false,\n        amount: false,\n        type: false,\n        otherType: true\n      },\n      inputClicked: {\n        name: false,\n        amount: false,\n        type: false,\n        otherType: false\n      },\n      calculationsData: {},\n      activeGraph: \"Average\"\n    };\n  }\n\n  render() {\n    const {\n      companyLoanDetails,\n      setCompanyLoanDetails\n    } = this.context;\n    let companiesUI;\n\n    if (this.state.companies !== []) {\n      companiesUI = this.state.companies.map(company => {\n        return /*#__PURE__*/React.createElement(Company, {\n          showLoanDetails: e => showLoanDetails(e, company._id),\n          key: company._id,\n          name: company.name,\n          deleteCompany: e => this.deleteCompany(e, company._id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 20\n          }\n        }, company.loans.map(loan => /*#__PURE__*/React.createElement(LoanRequest, {\n          amount: loan.amount,\n          type: loan.type,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 45\n          }\n        })));\n      });\n    }\n\n    const optionElements = [/*#__PURE__*/React.createElement(\"option\", {\n      key: \"-1\",\n      value: \"DEFAULT\",\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 29\n      }\n    }, \"Loan Type\"), loanTypes.map((loanType, index) => /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      value: loanType,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 124\n      }\n    }, loanType))];\n\n    const showLoanDetails = (e, companyId) => {\n      let clickedCompany = this.state.companies.find(company => company._id === companyId);\n      setCompanyLoanDetails(clickedCompany);\n      this.props.history.push('/details');\n    };\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(StyledForm, {\n      onSubmit: e => this.addLoan(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(InputAndError, {\n      id: \"nameInput\",\n      label: \"Name\",\n      name: \"name\",\n      value: this.state.loanData.name,\n      onChange: e => this.onChangeHandler(e),\n      onBlur: e => this.onBlurHandler(e),\n      errorMessage: this.state.inputValidated.name,\n      inputClicked: this.state.inputClicked.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(InputAndError, {\n      id: \"amountInput\",\n      label: \"Amount(\\xA3)\",\n      name: \"amount\",\n      value: this.state.loanData.amount,\n      onChange: e => this.onChangeHandler(e),\n      onBlur: e => this.onBlurHandler(e),\n      errorMessage: this.state.inputValidated.amount,\n      inputClicked: this.state.inputClicked.amount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(SelectAndError, {\n      id: \"loanType\",\n      label: \"Type\",\n      onBlur: e => this.onBlurHandler(e),\n      required: true,\n      name: \"type\",\n      value: this.state.loanData.type,\n      onChange: e => this.dropDownChangeHandler(e),\n      errorMessage: this.state.inputValidated.type,\n      inputClicked: this.state.inputClicked.type,\n      inputValidated: this.state.inputValidated.type,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 13\n      }\n    }, optionElements), this.state.loanData.type === \"Other\" ? /*#__PURE__*/React.createElement(InputAndError, {\n      id: \"otherType\",\n      label: \"Other Type\",\n      name: \"otherType\",\n      value: this.state.loanData.otherType,\n      onChange: e => this.onChangeHandler(e),\n      onBlur: e => this.onBlurHandler(e),\n      errorMessage: this.state.inputValidated.otherType,\n      inputClicked: this.state.inputClicked.otherType,\n      inputValidated: this.state.inputValidated.otherType,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 13\n      }\n    }) : null, /*#__PURE__*/React.createElement(\"button\", {\n      disabled: !isFormValid(this.state.inputValidated),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 13\n      }\n    }, \"Add Loan Request\")), /*#__PURE__*/React.createElement(StyledOuterDiv, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(StyledInnerDiv, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 13\n      }\n    }, \"Businesses\"), this.state.companies !== [] ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 13\n      }\n    }, \"Click Business to Show Further Details\"), /*#__PURE__*/React.createElement(StyledUl, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 13\n      }\n    }, companiesUI)) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 16\n      }\n    }, \"Currently no businesses\")), /*#__PURE__*/React.createElement(StyledChartDiv, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(StyledButton, {\n      active: this.state.activeGraph === \"Average\" ? \"isactive\" : \" \",\n      name: \"average\",\n      onClick: e => this.changeGraph(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 21\n      }\n    }, \"Average of Each Loan Type\"), /*#__PURE__*/React.createElement(StyledButton, {\n      active: this.state.activeGraph === \"Frequency (Type)\" ? \"isactive\" : \" \",\n      name: \"frequencyType\",\n      onClick: e => this.changeGraph(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 21\n      }\n    }, \"Frequency of Each Loan Type\"), /*#__PURE__*/React.createElement(StyledButton, {\n      active: this.state.activeGraph === \"Frequency (Band)\" ? \"isactive\" : \" \",\n      name: \"frequencyBands\",\n      onClick: e => this.changeGraph(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 21\n      }\n    }, \"Frequency of Loans in Each Band\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Chart, {\n      options: this.state.chartConfig.options,\n      series: this.state.chartConfig.series,\n      type: \"bar\",\n      height: \"500px\",\n      width: \"600px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nLoansAndData.contextType = companyLoanContext;\nexport default LoansAndData;","map":{"version":3,"sources":["/Users/jonathantaylor/Google Drive/Interview2/Frontend/src/containers/LoansAndData.js"],"names":["React","Component","axios","loanTypeContext","companyLoanContext","Company","InputAndError","SelectAndError","LoanRequest","styled","frequencyAndTotal","loanBandCounter","Chart","loanTypes","initialChartConfig","bandCounter","bandGroups","isFormValid","isFieldValid","StyledUl","ul","StyledChart","StyledButton","button","props","active","StyledForm","form","StyledInnerDiv","div","StyledOuterDiv","StyledChartDiv","LoansAndData","componentDidMount","getCompanies","constructor","get","then","response","frequencyAndTotalData","data","companies","dataTypes","Object","keys","frequencyAndTotals","values","averages","map","frequency","Math","round","totalAmount","toString","typeFrequencies","bandCounterObject","bandFrequencies","setState","state","reverse","calculationsData","frequencies","graphName","chartConfig","series","name","options","xaxis","categories","formData","addLoan","e","preventDefault","loanData","amount","type","otherType","post","initialFormData","dropDownChangeHandler","value","target","inputValidated","onChangeHandler","deleteCompany","companyId","stopPropagation","delete","onBlurHandler","validator","inputClicked","changeGraph","activeGraph","console","log","render","companyLoanDetails","setCompanyLoanDetails","context","companiesUI","company","showLoanDetails","_id","loans","loan","optionElements","loanType","index","clickedCompany","find","history","push","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { loanTypeContext, companyLoanContext } from '../context';\nimport Company from '../components/company';\nimport InputAndError from '../components/inputAndError';\nimport SelectAndError from '../components/selectAndError';\nimport LoanRequest from '../components/loanInfo';\nimport styled from 'styled-components';\nimport { frequencyAndTotal, loanBandCounter } from '../calculationFunctions';\nimport Chart from \"react-apexcharts\";\nimport { loanTypes, initialChartConfig, bandCounter, bandGroups } from '../config';\nimport { isFormValid, isFieldValid } from '../formValidation';\n\nconst StyledUl = styled.ul`\ndisplay: flex;\nwidth: 100%;\nflex-direction: column;\noverflow-y: scroll;\n`\n\nconst StyledChart = styled(Chart)`\nborder: black solid 1px;\nmargin: 4rem;\nwidth: 700px;\n`\n\nconst StyledButton = styled.button`\nwidth: 33%;\nbackground: ${props=>{\n    if(props.active===\"isactive\"){return \"blue\";}\n}};\n`\n\nconst StyledForm = styled.form`\ndisplay: flex;\nflex-direction: column;\nposition: absolute;\nright: 3rem;\nborder: 1px solid black;\npadding: 1rem;\n`\n\nconst StyledInnerDiv = styled.div`\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\nwidth: 600px;\n`\n\nconst StyledOuterDiv = styled.div`\ndisplay: flex;\nmargin: 5rem 5rem 0 5rem;\ngap: 5rem;\nmax-height: calc(100vh - 7rem);\n`\n\nconst StyledChartDiv = styled.div`\nalign-self: flex-end;\nborder-bottom: solid black 1px;\n`\n\n\n\nclass LoansAndData extends Component {\n    static contextType = companyLoanContext\n\n    componentDidMount (){this.getCompanies();}\n\n    constructor(props) {\n        super(props);\n        \n        this.initialFormData = {name: \"\", amount: \"\", type: \"DEFAULT\", otherType: \"\"};\n\n        this.state = {\n            chartConfig: initialChartConfig,\n            companies: [],\n            loanTypes: loanTypes,\n            loanData: this.initialFormData,\n            inputValidated: {name: false, amount: false, type: false, otherType: true},\n            inputClicked: {name: false, amount: false, type: false, otherType: false},\n            calculationsData: {},\n            activeGraph: \"Average\"\n        }\n    }\n\n\n    getCompanies = ()=>{\n        axios.get('http://localhost:5000/loans')\n        .then(response => {\n            //Creates the averages and total of each loan type data\n            let frequencyAndTotalData = frequencyAndTotal(loanTypes, response.data.companies);\n            let dataTypes = Object.keys(frequencyAndTotalData);\n            let frequencyAndTotals = Object.values(frequencyAndTotalData);\n            let averages = frequencyAndTotals.map(data=> data.frequency !== 0 ? Math.round(data.totalAmount/data.frequency).toString() : 0);\n            let typeFrequencies = frequencyAndTotals.map(data=>data.frequency);\n            //Creates the loan band data\n            let bandCounterObject = loanBandCounter(response.data.companies, bandCounter);\n            let bandFrequencies = Object.values(bandCounterObject);\n            //Updates the company state\n            this.setState({...this.state, \n                companies: response.data.companies.reverse(),\n                calculationsData: {averages: averages, frequencies: typeFrequencies, bandFrequencies: bandFrequencies}\n            })\n            //Updates the graph data\n            let graphName = this.state.chartConfig.series[0].name;\n            if(graphName===\"Averages\"||graphName===\"\") this.setState({...this.state, chartConfig: {...this.state.chartConfig, options: {...this.state.chartConfig.options, xaxis: {...this.state.chartConfig.options.xaxis, categories: dataTypes}}, series: [{name:\"Averages\", data: averages}]}});\n            else if (graphName===\"Frequency (Type)\")  this.setState({...this.state, chartConfig: {...this.state.chartConfig, options: {...this.state.chartConfig.options, xaxis: {...this.state.chartConfig.options.xaxis, categories: dataTypes}}, series: [{name:\"Frequency (Type)\", data: typeFrequencies}]}});\n            else if (graphName===\"Frequency (Band)\") this.setState({...this.state, chartConfig: {...this.state.chartConfig, options: {...this.state.chartConfig.options, xaxis: {...this.state.chartConfig.options.xaxis, categories: bandGroups}}, series: [{name:\"Frequency (Band)\", data: bandFrequencies}]}});\n})\n    }\n\n    formData = (response)=>{\n\n    }\n   \n    \n    addLoan = async (e)=>{\n        e.preventDefault();\n        let data = {name: this.state.loanData.name, amount: this.state.loanData.amount, type: this.state.loanData.type, otherType: this.state.loanData.otherType};\n        await axios.post('http://localhost:5000/loans', data);\n        this.setState({...this.state, loanData: this.initialFormData});\n        this.getCompanies();        \n    }\n\n    dropDownChangeHandler = (e)=>{\n        let {value} = e.target;\n        if(value===\"Other\"){\n            this.setState({...this.state, \n                loanData: {...this.state.loanData, type: value},\n                inputValidated: {...this.state.inputValidated, otherType: false}});\n        }\n        else{\n            this.setState({...this.state, \n                loanData: {...this.state.loanData, type: value, otherType: \"\"},\n                inputValidated: {...this.state.inputValidated, otherType: true}});\n        }\n    }\n\n    onChangeHandler = (e)=>{\n        let {name, value} = e.target;\n        this.setState({...this.state, loanData: {...this.state.loanData, [name]: value}});\n    }\n\n\n    deleteCompany = async (e, companyId)=>{\n        e.stopPropagation();\n        await axios.delete('http://localhost:5000/loans/' + companyId);\n        // let updatedCompanies = [...this.state.companies].filter(company=>company._id!==companyId);\n        // this.setState({...this.state, companies: updatedCompanies});\n        this.getCompanies();\n    }\n\n  \n\n    onBlurHandler = (e)=>{\n        let {name, value} = e.target;\n        let validator = isFieldValid(name, value);\n\n        this.setState({...this.state, \n            inputClicked: {...this.state.inputClicked, [name]: true},\n            inputValidated: {...this.state.inputValidated, [name]: validator}\n        })\n    }\n\n \n\nchangeGraph=(e)=>{\n    let name;\n    let data;\n    let categories;\n    let activeGraph;\n    switch (e.target.name){\n        case \"average\":\n            name = \"Averages\";\n            data = this.state.calculationsData.averages;\n            categories = loanTypes;\n            activeGraph = \"Average\"\n            break;\n        case \"frequencyType\":\n            name = \"Frequency (Type)\";\n            data = this.state.calculationsData.frequencies;\n            categories = loanTypes;\n            activeGraph = \"Frequency (Type)\"\n            break;\n        \n        case \"frequencyBands\":\n            name = \"Frequency (Band)\";\n            data = this.state.calculationsData.bandFrequencies;\n            categories = bandGroups;\n            activeGraph = \"Frequency (Band)\"\n            break;\n        default:\n            console.log(\"error\");     \n    }\n\n    this.setState({...this.state, \n        chartConfig: {...this.state.chartConfig, options:{...this.state.chartConfig.options, xaxis: {...this.state.chartConfig.options.xaxis, categories: categories}}, series: [{name: name, data: data}]},\n        activeGraph: activeGraph\n});\n}\n\n\n  \n   \n    render(){\n\n        const { companyLoanDetails, setCompanyLoanDetails } = this.context\n        let companiesUI;\n    if(this.state.companies!==[]){\n        companiesUI = this.state.companies.map(company=>{\n            return <Company showLoanDetails={(e)=>showLoanDetails(e, company._id)} key={company._id} name = {company.name} deleteCompany={(e)=>this.deleteCompany(e, company._id)}>\n                {company.loans.map((loan)=> <LoanRequest amount={loan.amount} type={loan.type}/>)}\n            </Company>\n        })\n    }\n    const optionElements = [<option key=\"-1\" value=\"DEFAULT\" disabled>Loan Type</option>, loanTypes.map((loanType, index)=><option key={index} value={loanType}>{loanType}</option>)];\n\n    const showLoanDetails = (e, companyId)=>{\n        let clickedCompany = this.state.companies.find(company=> company._id===companyId);\n        setCompanyLoanDetails(clickedCompany);\n        this.props.history.push('/details');\n        \n    }\n\n    return(\n        <>\n        <StyledForm onSubmit={(e)=>this.addLoan(e)} >\n            <InputAndError id=\"nameInput\" label=\"Name\" name=\"name\" value={this.state.loanData.name} onChange={(e)=>this.onChangeHandler(e)} onBlur={(e)=>this.onBlurHandler(e)} errorMessage={this.state.inputValidated.name} inputClicked={this.state.inputClicked.name}/>\n            <InputAndError id=\"amountInput\" label=\"Amount(£)\" name=\"amount\" value={this.state.loanData.amount} onChange={(e)=>this.onChangeHandler(e)} onBlur={(e)=>this.onBlurHandler(e)} errorMessage={this.state.inputValidated.amount} inputClicked={this.state.inputClicked.amount}/>\n            <SelectAndError id=\"loanType\" label=\"Type\" onBlur={(e)=>this.onBlurHandler(e)} required name=\"type\" value={this.state.loanData.type} onChange={(e)=>this.dropDownChangeHandler(e)} errorMessage={this.state.inputValidated.type} inputClicked={this.state.inputClicked.type} inputValidated={this.state.inputValidated.type}>\n                {optionElements}\n            </SelectAndError>\n            {this.state.loanData.type===\"Other\" ? \n            <InputAndError id=\"otherType\" label=\"Other Type\" name=\"otherType\" value={this.state.loanData.otherType} onChange={(e)=>this.onChangeHandler(e)} onBlur={(e)=>this.onBlurHandler(e)} errorMessage={this.state.inputValidated.otherType} inputClicked={this.state.inputClicked.otherType} inputValidated={this.state.inputValidated.otherType}/>\n            : null}\n            <button disabled={!isFormValid(this.state.inputValidated)}>Add Loan Request</button>\n        </StyledForm>\n        <StyledOuterDiv>\n        <StyledInnerDiv>\n            <h1>Businesses</h1>\n            \n            {this.state.companies!==[] ?\n            <> \n            <p>Click Business to Show Further Details</p>\n            <StyledUl>{companiesUI}</StyledUl>\n            </>\n             : <p>Currently no businesses</p>}\n        </StyledInnerDiv>\n            <StyledChartDiv>\n                <div>\n                    <StyledButton active={this.state.activeGraph === \"Average\" ? \"isactive\" : \" \"} name=\"average\" onClick={(e)=>this.changeGraph(e)}>Average of Each Loan Type</StyledButton>  \n                    <StyledButton active={this.state.activeGraph === \"Frequency (Type)\" ? \"isactive\" : \" \"} name=\"frequencyType\" onClick={(e)=>this.changeGraph(e)}>Frequency of Each Loan Type</StyledButton>\n                    <StyledButton active={this.state.activeGraph === \"Frequency (Band)\" ? \"isactive\" : \" \"} name=\"frequencyBands\" onClick={(e)=>this.changeGraph(e)}>Frequency of Loans in Each Band</StyledButton>\n                </div>\n                <div>\n              <Chart\n                options={this.state.chartConfig.options}\n                series={this.state.chartConfig.series}\n                type=\"bar\"\n                height=\"500px\"\n                width= \"600px\"\n              />\n              </div>\n            </StyledChartDiv>\n            </StyledOuterDiv>\n        </>\n    )\n}; \n}\n\nexport default LoansAndData;"]},"metadata":{},"sourceType":"module"}